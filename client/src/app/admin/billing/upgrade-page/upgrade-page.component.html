<material-navbar></material-navbar>

<mat-horizontal-stepper class="container main-content" [linear]="true">
    <mat-step label="Subscription plan" [completed]="state.planIsSelected()">
        <select-plan-panel (selected)="nextStep()"></select-plan-panel>
    </mat-step>

    <mat-step label="Subscription interval" [completed]="state.childPlanIsSelected()">
        <select-plan-period-panel [showSidebar]="true" (selected)="nextStep()"></select-plan-period-panel>
    </mat-step>

    <mat-step label="Payment" [completed]="state.childPlanIsSelected()">
        <div class="step-container payment-step" *ngIf="state.getFinalPlan()">
            <div class="left-col">
                <create-subscription-tabs [plan]="state.getFinalPlan()" (completed)="navigateAfterSuccess()"></create-subscription-tabs>
            </div>

            <upgrade-page-aside [plan]="state.selectedPlan" class="right-col"></upgrade-page-aside>

            <mat-progress-bar color="accent" mode="indeterminate" *ngIf="loading"></mat-progress-bar>
        </div>

        <p class="legal-info">You authorise {{settings.get('branding.site_name')}} to charge you automatically every month, until you cancel your subscription. You consent to get access to your {{settings.get('branding.site_name')}} subscription immediately, and acknowledge that refunds are only available within 14 days and provided you haven't accessed Spotify. Full terms and instructions on how to cancel are available here.</p>
    </mat-step>
</mat-horizontal-stepper>

